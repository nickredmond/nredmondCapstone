package ui;

import java.util.Hashtable;

import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSlider;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class ControlsPanel extends JPanel {
	private JSlider penSizeSlider, areaSizeSlider;
	private JButton saveButton, clearButton;
	private DrawingPanel parent;
	
	private final int MAX_AREA_SIZE = 100;
	private final int MIN_AREA_SIZE = 10;
	
	private final int MAX_PEN_WIDTH = 9;
	private final int MIN_PEN_WIDTH = 1;
	
	public ControlsPanel(DrawingPanel parent){
		this.parent = parent;
		
		setupPanel();
	}

	private void setupPanel() {
		JLabel penLabel = new JLabel("Pen Width");
		JLabel areaLabel = new JLabel("Image Size");
		
		setupPenSlider();
		setupAreaSlider();
	}

	private void setupAreaSlider() {
		areaSizeSlider = new JSlider(JSlider.HORIZONTAL, MIN_AREA_SIZE, MAX_AREA_SIZE);
		areaSizeSlider.setMajorTickSpacing(10);
		areaSizeSlider.setMinorTickSpacing(1);
		areaSizeSlider.setPaintTicks(true);
		areaSizeSlider.setPaintLabels(true);
	}

	private void setupPenSlider() {
		penSizeSlider = new JSlider(JSlider.HORIZONTAL, MIN_PEN_WIDTH, MAX_PEN_WIDTH);
		penSizeSlider.setMinorTickSpacing(2);
		penSizeSlider.setPaintTicks(true);
		penSizeSlider.setPaintLabels(true);
		
		Hashtable<Integer, String> penLabels = new Hashtable<Integer, String>();
		penLabels.put(MIN_PEN_WIDTH, new Integer(MIN_PEN_WIDTH).toString());
		penLabels.put(MAX_PEN_WIDTH, new Integer(MAX_PEN_WIDTH).toString());
		penSizeSlider.setLabelTable(penLabels);
		penSizeSlider.setPaintLabels(true);
	}
	
	private class SliderListener implements ChangeListener{
		@Override
		public void stateChanged(ChangeEvent evt) {
			
			if (evt.getSource().getClass() == JSlider.class && !((JSlider)evt.getSource()).getValueIsAdjusting()){
				JSlider source = (JSlider)evt.getSource();
				int value = source.getValue();
				
				if (source == penSizeSlider){
					parent.penSizeChanged(value);
				}
				else if (source == areaSizeSlider){
					parent.areaSizeChanged(value);
				}
			}
		}
	}
}
